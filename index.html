<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KeySpend — Create & Share Verification Keys</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; }
    body {
      background: radial-gradient(circle at top left, #140020, #000);
      min-height:100vh; overflow-x:hidden; color:#f0f0f0;
      transition: background 0.8s ease;
    }
    #background {
      position:fixed; inset:0; z-index:-1;
      background: radial-gradient(ellipse at top, #250045, #0a0017);
      overflow:hidden;
    }
    #background::before {
      content:''; position:absolute; width:200%; height:200%;
      background:conic-gradient(from 0deg, #4f00ff, #9f00ff, #ff0080, #4f00ff);
      animation: spin 30s linear infinite; opacity:0.08;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    header {
      display:flex; justify-content:space-between; align-items:center;
      padding:18px 40px; background:rgba(25,0,50,0.8); backdrop-filter:blur(10px);
      border-bottom:1px solid rgba(255,255,255,0.08); position:sticky; top:0; z-index:20;
    }
    .logo {
      display:flex; align-items:center; gap:10px; font-weight:700; font-size:1.4em;
    }
    .logo svg { width:26px; height:26px; stroke:#a86cff; }
    button {
      background:linear-gradient(135deg,#6a00ff,#9f46ff);
      border:none; border-radius:8px; padding:10px 20px; color:white;
      font-weight:600; cursor:pointer; transition:0.3s;
    }
    button:hover { transform:translateY(-2px); box-shadow:0 0 12px rgba(160,80,255,0.5); }
    main { max-width:900px; margin:auto; padding:60px 20px; text-align:center; }
    h2 {
      font-size:2em; margin-bottom:16px;
      background:linear-gradient(90deg,#b47aff,#ffccff);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }
    section { display:none; }
    section.active { display:block; animation:fadeIn 0.6s ease; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:none; } }
    .card {
      background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.08);
      border-radius:14px; padding:20px; text-align:left; backdrop-filter:blur(10px);
      transition: all 0.3s ease;
    }
    .card:hover { background:rgba(255,255,255,0.07); transform:translateY(-3px); }
    .key-grid {
      display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
      gap:20px; margin-top:30px;
    }
    input,textarea {
      width:100%; padding:12px; border:none; border-radius:8px;
      background:rgba(255,255,255,0.1); color:white; margin-bottom:10px;
    }
    ::placeholder { color:#ccc; }
    input[readonly] { cursor:text; background:rgba(255,255,255,0.06); }
    footer { text-align:center; padding:20px; color:#888; font-size:0.9em;
      border-top:1px solid rgba(255,255,255,0.08);
    }
    .text-muted { color:#aaa; font-size:0.9em; }
    .glow-btn {
      background:linear-gradient(135deg,#ff007f,#9d00ff);
    }
    .glow-btn:hover { box-shadow:0 0 16px rgba(255,0,170,0.4); }
    .icon {
      stroke-width:1.7; vertical-align:middle; margin-right:6px;
    }
  </style>
</head>
<body>
  <div id="background"></div>
  <header>
    <div class="logo">
      <svg data-lucide="key" class="icon"></svg>
      KeySpend
    </div>
    <button id="createKeyBtn">
      <svg data-lucide="plus-circle" class="icon"></svg>
      Create Key
    </button>
  </header>

  <main>
    <!-- Dashboard Section -->
    <section id="dashboard" class="active">
      <h2>Your Keys</h2>
      <p class="text-muted">Manage, share and distribute verification keys.</p>
      <div id="keyList" class="key-grid"></div>
      <p id="noKeys" class="text-muted" style="margin-top:20px;">No keys yet. Create one above.</p>
    </section>

    <!-- Creator Section -->
    <section id="creator">
      <h2>Create a New Key</h2>
      <input type="text" id="keyName" placeholder="Key name (e.g. Premium Access)" />
      <textarea id="keyDesc" rows="3" placeholder="Description or requirements..."></textarea>
      <button id="generateKey" class="glow-btn">
        <svg data-lucide="wand" class="icon"></svg>
        Generate Key
      </button>
    </section>

    <!-- Public View Section -->
    <section id="publicView">
      <div class="card" style="max-width:500px;margin:auto;">
        <h2 id="pubName"></h2>
        <p id="pubDesc"></p>
        <p class="text-muted" style="margin-top:10px;">Shared via KeySpend</p>
        <button onclick="window.location='/'">Return Home</button>
      </div>
    </section>
  </main>

  <footer>© 2025 KeySpend — Cloudless Key Verification Platform</footer>

  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <script>
    lucide.createIcons();

    // Elements
    const createKeyBtn = document.getElementById("createKeyBtn");
    const dashboard = document.getElementById("dashboard");
    const creator = document.getElementById("creator");
    const publicView = document.getElementById("publicView");
    const keyList = document.getElementById("keyList");
    const noKeys = document.getElementById("noKeys");
    const keyName = document.getElementById("keyName");
    const keyDesc = document.getElementById("keyDesc");
    const generateKey = document.getElementById("generateKey");
    const pubName = document.getElementById("pubName");
    const pubDesc = document.getElementById("pubDesc");

    // Utility functions
    function randomId(len = 12) {
      const chars = "abcdefghijklmnopqrstuvwxyz0123456789";
      let id = "";
      for (let i = 0; i < len; i++) {
        id += chars[Math.floor(Math.random() * chars.length)];
      }
      return id;
    }
    function getKeys() {
      return JSON.parse(localStorage.getItem("keys") || "[]");
    }
    function saveKeys(keys) {
      localStorage.setItem("keys", JSON.stringify(keys));
    }
    function showSection(id) {
      [dashboard, creator, publicView].forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }
    function renderKeys() {
      const keys = getKeys();
      keyList.innerHTML = "";
      if (keys.length === 0) {
        noKeys.style.display = "block";
        return;
      }
      noKeys.style.display = "none";
      keys.forEach(k => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h3>${k.name}</h3>
          <p class="text-muted">${k.desc || "No description"}</p>
          <input readonly value="${location.origin}?key=${k.id}&n=${encodeURIComponent(k.name)}" />
          <button style="margin-top:10px;background:#ff004c;color:white;" onclick="deleteKey('${k.id}')">
            <svg data-lucide="trash-2" class="icon"></svg> Delete
          </button>
        `;
        keyList.appendChild(card);
      });
      lucide.createIcons();
    }
    function deleteKey(id) {
      const keys = getKeys().filter(k => k.id !== id);
      saveKeys(keys);
      renderKeys();
    }

    // Event handlers
    createKeyBtn.onclick = () => {
      showSection("creator");
    };
    generateKey.onclick = () => {
      const name = keyName.value.trim();
      if (!name) {
        alert("Please enter a key name");
        return;
      }
      const desc = keyDesc.value.trim();
      const id = randomId();
      const keys = getKeys();
      keys.push({ id, name, desc, created: Date.now() });
      saveKeys(keys);
      keyName.value = "";
      keyDesc.value = "";
      showSection("dashboard");
      renderKeys();
    };

    // Public view if link params
    const params = new URLSearchParams(location.search);
    if (params.has("key")) {
      showSection("publicView");
      const name = decodeURIComponent(params.get("n") || "");
      pubName.textContent = name || "Private Key";
      pubDesc.textContent = "Verification Key ID: " + params.get("key");
      document.querySelector("header").style.display = "none";
    } else {
      renderKeys();
    }
  </script>
</body>
</html>
